<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AVR Liberty: Network Stack (netstack.c)</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">AVR Liberty
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Library of routines for AVR microcontollers</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__netstack.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Network Stack (netstack.c)</div>  </div>
<div class="ingroups"><a class="el" href="group__network.html">Network Library</a></div></div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr class="memitem:gac2056259feef537f2dcec00d196b8831"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__netstack.html#gac2056259feef537f2dcec00d196b8831">NETSTACK_BUFFERSIZE</a>&#160;&#160;&#160;(576+<a class="el" href="group__net.html#ga055d3f576495c1e6018012e1d952da1f">ETH_HEADER_LEN</a>)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga95c5afb028589860d43ebb053a5f6dae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__netstack.html#ga95c5afb028589860d43ebb053a5f6dae">netstackInit</a> (uint32_t ipaddress, uint32_t netmask, uint32_t gatewayip)</td></tr>
<tr class="memitem:gab230b009719ac2ef3a74a77fbf63b13c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="avrlibtypes_8h.html#a4a020a9446b094e07e53376ac939a64d">u08</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__netstack.html#gab230b009719ac2ef3a74a77fbf63b13c">netstackGetBuffer</a> (void)</td></tr>
<tr class="memdesc:gab230b009719ac2ef3a74a77fbf63b13c"><td class="mdescLeft">&#160;</td><td class="mdescRight">netstackGetBuffer returns a pointer to the common receive/process/transmit buffer.  <a href="#gab230b009719ac2ef3a74a77fbf63b13c"></a><br/></td></tr>
<tr class="memitem:ga4bdf28ad2ec2211f34cda23b56e755a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__netstack.html#ga4bdf28ad2ec2211f34cda23b56e755a3">netstackService</a> (void)</td></tr>
<tr class="memitem:ga20e208d135f73c8bf0869cdce4002bc9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__netstack.html#ga20e208d135f73c8bf0869cdce4002bc9">netstackIPProcess</a> (unsigned int len, <a class="el" href="group__net.html#gad7ca4d7ea0c8b7a9537bd2c4871ef19f">ip_hdr</a> *packet)</td></tr>
<tr class="memitem:ga90d7bac1110c4e7c4ada0bc850f2d1a3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__netstack.html#ga90d7bac1110c4e7c4ada0bc850f2d1a3">netstackUDPIPProcess</a> (unsigned int len, <a class="el" href="structudpip__hdr.html">udpip_hdr</a> *packet) <a class="el" href="timerx8_8c.html#a8f45eb297e007bc0798206d7ba22b559">__attribute__</a>((weak))</td></tr>
<tr class="memitem:ga494042c950715320e85a835c5b44f7fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__netstack.html#ga494042c950715320e85a835c5b44f7fa">netstackTCPIPProcess</a> (unsigned int len, <a class="el" href="structtcpip__hdr.html">tcpip_hdr</a> *packet) <a class="el" href="timerx8_8c.html#a8f45eb297e007bc0798206d7ba22b559">__attribute__</a>((weak))</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &quot;<a class="code" href="netstack_8h.html" title="Network Stack.">net/netstack.h</a>&quot;</span> 
</pre></div> <dl class="section user"><dt>Description</b></dt><dd>This library co-ordinates the various pieces of a typical IP network stack into one unit. Included are handling for ARP, ICMP, and IP packets. UDP and TCP packets are processed and passed to the user.</dd></dl>
<p>This is an example of how to use the various network libraries, and is meant to be useful out-of-the-box for most users. However, some users may find it restrictive and write their own handlers instead. This stack implementation is by no means the only way to use the various network libraries.</p>
<dl class="section note"><dt>Note:</dt><dd>This is NOT a full-blown TCP/IP stack. It merely handles lower level stack functions so that UDP and TCP packets can be sent and received easily. End-to-end TCP functionality may be added in a future version. Until then, I can recommend using other embedded TCP/IP stacks like Adam Dunkel's uIP. </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gac2056259feef537f2dcec00d196b8831"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__netstack.html#gac2056259feef537f2dcec00d196b8831">NETSTACK_BUFFERSIZE</a>&#160;&#160;&#160;(576+<a class="el" href="group__net.html#ga055d3f576495c1e6018012e1d952da1f">ETH_HEADER_LEN</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>NET_BUFFERSIZE is the common receive/process/transmit buffer.</p>
<ul>
<li>You may override the default NET_BUFFERSIZE by defining an alternate value in <a class="el" href="global_8h.html" title="AVRlib project global include.">global.h</a>.</li>
<li>Network packets larger than NET_BUFFERSIZE will not be accepted. </li>
</ul>

<p>Definition at line <a class="el" href="netstack_8h_source.html#l00053">53</a> of file <a class="el" href="netstack_8h_source.html">netstack.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gab230b009719ac2ef3a74a77fbf63b13c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="avrlibtypes_8h.html#a4a020a9446b094e07e53376ac939a64d">u08</a>* <a class="el" href="group__netstack.html#gab230b009719ac2ef3a74a77fbf63b13c">netstackGetBuffer</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>netstackGetBuffer returns a pointer to the common receive/process/transmit buffer. </p>

<p>Definition at line <a class="el" href="netstack_8c_source.html#l00041">41</a> of file <a class="el" href="netstack_8c_source.html">netstack.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga95c5afb028589860d43ebb053a5f6dae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__netstack.html#ga95c5afb028589860d43ebb053a5f6dae">netstackInit</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ipaddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>netmask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>gatewayip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>netstackInit prepares the network interface for use and should be called once at the beginning of the user program. </p>
<dl class="section note"><dt>Note:</dt><dd>Use ipSetAddress() to change network parameters in mid-run. </dd></dl>

<p>Definition at line <a class="el" href="netstack_8c_source.html#l00022">22</a> of file <a class="el" href="netstack_8c_source.html">netstack.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga20e208d135f73c8bf0869cdce4002bc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__netstack.html#ga20e208d135f73c8bf0869cdce4002bc9">netstackIPProcess</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__net.html#gad7ca4d7ea0c8b7a9537bd2c4871ef19f">ip_hdr</a> *&#160;</td>
          <td class="paramname"><em>packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>netstackIPProcess handles distribution of IP received packets. </p>

<p>Definition at line <a class="el" href="netstack_8c_source.html#l00091">91</a> of file <a class="el" href="netstack_8c_source.html">netstack.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4bdf28ad2ec2211f34cda23b56e755a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__netstack.html#ga4bdf28ad2ec2211f34cda23b56e755a3">netstackService</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>netstackService should be called in the main loop of the user program. The function will process one received network packet per call. The return value is the length of the packet processed, or zero if no packet was processed. </p>

<p>Definition at line <a class="el" href="netstack_8c_source.html#l00046">46</a> of file <a class="el" href="netstack_8c_source.html">netstack.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga494042c950715320e85a835c5b44f7fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__netstack.html#ga494042c950715320e85a835c5b44f7fa">netstackTCPIPProcess</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtcpip__hdr.html">tcpip_hdr</a> *&#160;</td>
          <td class="paramname"><em>packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This weakly-defined function is the default handler for incoming TCP/IP packets. Users should define this same function in user code (same name and arguments) to override this default handler and get access to the received packets. </p>

<p>Definition at line <a class="el" href="netstack_8c_source.html#l00138">138</a> of file <a class="el" href="netstack_8c_source.html">netstack.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga90d7bac1110c4e7c4ada0bc850f2d1a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__netstack.html#ga90d7bac1110c4e7c4ada0bc850f2d1a3">netstackUDPIPProcess</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structudpip__hdr.html">udpip_hdr</a> *&#160;</td>
          <td class="paramname"><em>packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This weakly-defined function is the default handler for incoming UDP/IP packets. Users should define this same function in user code (same name and arguments) to override this default handler and get access to the received packets. </p>

<p>Definition at line <a class="el" href="netstack_8c_source.html#l00131">131</a> of file <a class="el" href="netstack_8c_source.html">netstack.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">Generated on Wed Mar 28 2012 19:21:23 for AVR Liberty by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
